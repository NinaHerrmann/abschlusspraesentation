# Integrationsszenarien #2 und #3

> Als **Nutzer** möchte ich in der Dateiauswahl im Learnweb eine Datei aus meiner Sciebo Instanz **hochladen**.

<br>

> Als **Nutzer** möchte ich in der Dateiauswahl im Learnweb eine Datei aus meiner Sciebo Instanz **verlinken**.

## Ziel und Zweck
* Direkter Dateien Zugriff mit Hilfe des OAuth2.0 Verfahrens

---

## Implementierung: `repository_sciebo`

* Moodle Plugin Typ: Repository

    * Schnittstellen um auf Dateien aus externen Quellen zuzugreifen
    * Google Drive, Dropbox, WebDAV

        * Google Drive und Dropbox benutzen jetzt beide OAuth 2.0

    * Unterschied Autorisierung und Authentifizierung im admin_tool
    <aside class="notes">
        * Der wohl größte Unterschied wir haben die Authentifizierung in ein anderes Plugin ausgelagert.
        * Wer von Ihnen kennt den File Picker?

    </aside>

---

## Nutzer Sicht

<div>
	<img alt="FilePicker" align="middle" src="images/SelectFilesredblock.png">
</div>
<div>
	<img alt="LeererFilePicker" src="images/LeererFilePicker.png">
</div>

---

## Schnittstelle:`lib.php`
  * erbt von abstrakter Klasse `repository`
      * `get_listing()`
        * unterscheidet zwischen Dateien und Ordnern
        * dynamisches Laden von Inhalten
        * Logout Button
        * *für den Admin* Weiterleitung zu Einstellungen
            <div>
            	<img alt="FilePicker" src="images/FilePickerredblock.png" width=150%>
            </div>

---

## Schnittstelle:`lib.php`

* `print_login()`
    * Login-Button --> Pop-up Window oder neuer Tab
* `supported_returntypes()`
    * FILE_INTERNAL
    * FILE_EXTERNAL
    * FILE_REFERENCE
* `get_file()` und `get_link()`
    * leiten die Anfrage an das oauth2owncloud Plugin weiter
<aside class="notes">
      FILE_INTERNAL: Dateien dürfen im Moodle Dateien System hoch und runtergeladen werden.
      FILE_EXTERNAL: Dateien bleiben im externen Repository und werden von dort bezogen.
      FILE_REFERENCE: Dateien werden lokal erstellt, aber werden extern synchronisiert wenn notwendig.
</aside>

---

## Travis und CI

* Code Checker tool für Coding Guidelines
*

---

<!-- .element: data-background-image="images/pixabay/photo-336376.jpg" data-state="dim-background" -->
<h1 onclick="window.open('https://sso.uni-muenster.de/PSLearnweb/ps_sciebo','_blank');">Demo</h1>
