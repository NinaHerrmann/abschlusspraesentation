# Integrationsszenarien #2 und #3

> Als **Nutzer** möchte ich in der Dateiauswahl in moodle eine Datei aus meiner ownCloud Instanz **hochladen**.

<br>

> Als **Nutzer** möchte ich in der Dateiauswahl im moodle eine Datei aus meiner ownCloud Instanz **verlinken**.

* Direkter Dateien Zugriff

---

## Implementierung: `repository_owncloud`

* Moodle Plugin Typ: Repository

    * Schnittstellen um auf Dateien aus externen Quellen zuzugreifen
    * Google Drive, Dropbox, WebDAV

        * Google Drive und Dropbox benutzen jetzt beide OAuth 2.0

    * Unterschied Autorisierung und Authentifizierung im admin_tool
    <aside class="notes">
        * Der wohl größte Unterschied wir haben die Authentifizierung in ein anderes Plugin ausgelagert.
        * Wer von Ihnen kennt den File Picker?

    </aside>

---

<div>
	<img alt="abhängigkeiten" align="middle" src="images/abhaengigkeiten/abhaengigkeiten1.png">
</div>

---

## Nutzer Sicht

<div>
	<img alt="FilePicker" align="middle" data-src="images/SelectFilesredblock.png">
</div>
<div>
<<<<<<< HEAD
	<img alt="LeererFilePicker" src="images/LeererFilePicker.png">
=======
	<img alt="filledFilePicker" data-src="images/completeFilePicker.png">
>>>>>>> master
</div>

---

## Schnittstelle:`lib.php`
* erbt von abstrakter Klasse `repository`
* `print_login()`
    * Login-Button --> Pop-up Window oder neuer Tab
* `check_login()`
* `supported_returntypes()`
* `get_file()` und `get_link()`
    * leiten die Anfrage an das oauth2owncloud Plugin weiter
<aside class="notes">
      * und viele mehr...
      FILE_INTERNAL: Dateien dürfen im Moodle Dateien System hoch und runtergeladen werden.
      FILE_EXTERNAL: Dateien bleiben im externen Repository und werden von dort bezogen.
      FILE_REFERENCE: Dateien werden lokal erstellt, aber werden extern synchronisiert wenn notwendig.
</aside>

---

## Schnittstelle:`lib.php`
      * `get_listing()`
        * unterscheidet zwischen Dateien und Ordnern
        * dynamisches Laden von Inhalten
        * Logout Button
        * *für den Admin* Weiterleitung zu Einstellungen
<<<<<<< HEAD
            <div>
            	<img alt="FilePicker" src="images/FilePickerredblock.png" width=150%>
            </div>
=======
        <div>
        	<img alt="FilePicker" data-src="images/FilePickerredblock.png" width=150%>
        </div>
>>>>>>> master

---

## Travis und CI

* Code Checker tool für Coding Guidelines
*

---

<!-- .element: data-background-image="images/pixabay/photo-336376.jpg" data-state="dim-background" -->
<h1 onclick="window.open('https://sso.uni-muenster.de/PSLearnweb/ps_sciebo','_blank');">Demo</h1>

note:
* File Picker zeigen
  * Autorisierung des Zugriffes
  * Datei herunterladen
  * Datei verlinken
